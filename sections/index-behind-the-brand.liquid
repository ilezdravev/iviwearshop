<div class="Content__main Container">
  <figcaption style="text-align: center;font-size:5.5rem;"><h2>{{section.settings.heading}}</h2></figcaption>
  <figure class="mainImage {% if section.settings.main_link != blank %}js-clickBlock{% endif %}">
  {% assign image = section.settings.main_image %}
    <img 
      data-src="{{image | img_url: '400x'}}" 
      data-srcset="
      {{image | img_url: '400x'}} 400w,
      {{image | img_url: '800x'}} 800w,
      {{image | img_url: '1200x'}} 1200w,
      {{image | img_url: '1600x'}} 1600w"
      class="lazyload"
      width={{image.width}}
      height= {{image.height}}
      alt="{{image.alt}}"
    />
    {% if section.settings.main_link != blank %}
      <a class="Button u-hidden" href="{{section.settings.main_link}}">See more</a>
    {% endif %}
  </figure>
  {% comment %} <button class="Button Button--play" data-layout="noLayout" aria-label="play" data-action="{ type: 'Modal', target: 'behind-the-brand', action: 'toggle' }"> 
    <svg viewBox='0 0 20 20' class='icon plus' width='1em' height='1em'>
      <use href='#icon-play'></use>
    </svg>
  </button> {% endcomment %}
  <div class="deco"></div>
  <span class="aside">{{section.settings.aside}}</span>
</div>

<div class="Content__secondary">
  <div class="bg lazyload"
    style="background-color: {{section.settings.bg_color}}; background-size: {{section.settings.bg_size}}%;"
    data-bgset="{% include 'responsive-bg-image', image: section.settings.bg_image %}"></div>
  <div class="Container">
    <header>
      <h3 class="heading">{{section.settings.slider_heading}}</h3>
      {% if section.settings.slider_link %}
        <a 
          class="Button" 
          data-style="solid green" 
          {% if section.settings.btn_color %}style="background-color: {{section.settings.btn_color}};"{% endif %} 
          href="{{section.settings.slider_link}}">{{section.settings.btn_label | default: "Read All"}}</a>
      {% endif %}
    </header>
    <div class="Slider" data-component="BTBSlider">
      {% for block in section.blocks %}
        <div class="Slider__item">
          <figure>
          {% assign image = block.settings.image %}
            <img 
              data-src="{{image | img_url: '400x'}}" 
              data-srcset="
              {{image | img_url: '400x'}} 400w,
              {{image | img_url: '800x'}} 800w,
              {{image | img_url: '1200x'}} 1200w"
              class="lazyload"
              width={{image.width}}
              height= {{image.height}}
              alt="{{image.alt}}"
            />
            <figcaption>{{block.settings.caption}}</figcaption>
          </figure>
        </div>
      {% endfor %}
    </div>
  </div>
</div>

{% comment %} 
  <div class="Modal Modal--big js-videoController" data-component="Modal" data-identifier="behind-the-brand">
    <div class="Modal__box">
    
      <button class="Button Button--icon js-closeModal close-modal" data-action="{ type: 'Modal', target: 'behind-the-brand', action: 'toggle' }" aria-label="close">
        <svg viewBox='0 0 20 20' class='icon' width='1em' height='1em'>
          <use href='#icon-close'></use>
        </svg>
      </button>
    
      <div class="Modal__content Media">
        <div 
          class="MediaPlayer Media__content" 
          data-component="MediaPlayer" 
          data-video-link="{{section.settings.video_link}}"
          data-options='{"muted":false, "playing":false, "loop":false, "controls": true}'></div>  
      </div>
    </div>
    <span class="backdrop"></span>
  </div>
 {% endcomment %}


<div class="SliderNav Container">
  <button class="Button button--previous" data-layout="noLayout" aria-label="Previous Slide">
    <svg width="147" height="36" viewBox="0 0 147 36">
      <use xlink:href='#arrow-left'></use>
    </svg>
  </button>
  <div class="caption">
    
  </div>
  <button class="Button button--next" data-layout="noLayout" aria-label="Next Slide">
    <svg width="147" height="36" viewBox="0 0 147 36">
      <use xlink:href='#arrow-right'></use>
    </svg>
  </button>
</div>


{% schema %}
{
  "name": "Behind The Brand",
  "class": "Section Section--behind-the-brand",
  "settings": [
    {
      "type": "image_picker",
      "id": "bg_image",
      "label": "Background Image",
      "info": "Use a patternable image for best results"
    },
    {
      "type": "range",
      "id": "bg_size",
      "min": 20,
      "max": 100,
      "step": 10,
      "unit": "%%%",
      "label": "Background Size",
      "default": 20
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background Color"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading"
    },
    {
      "type": "image_picker",
      "id": "main_image",
      "label": "Main Image"
    },
    {
      "type": "url",
      "id": "main_link",
      "label": "Link"
    },
    {
      "type": "text",
      "id": "aside",
      "label": "Aside"
    },
    {
      "type": "header",
      "content": "Slider"
    },
    {
      "type": "text",
      "id": "slider_heading",
      "label": "Heading"
    },
    {
      "type": "url",
      "id": "slider_link",
      "label": "Link"
    },
    {
      "type": "text",
      "id": "btn_label",
      "label": "Button Label"
    },
    {
      "type": "color",
      "id": "btn_color",
      "label": "Button Color",
      "default": "#cecec0"
    }
  ],
  "blocks": [
    {
      "type": "slider-item",
      "name": "Slider Item",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "caption",
          "label": "Caption"
        }
      ]
    }
  ],
  "presets": [
      {
        "name": "Behind the Brand",
        "category": "Shop"
      }
    ]
}
{% endschema %}