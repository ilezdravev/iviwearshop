{"version":3,"sources":["webpack:///./src/js/components/nav/CollectionSort.js"],"names":["theme","colors","primary25","primary","neutral30","customStyles","control","base","state","borderColor","borderRadius","boxShadow","minHeight","indicatorsContainer","padding","fontSize","placeholder","color","valueContainer","fontWeight","menu","marginTop","border","CollectionSort","props","initialOption","options","params","ctx","this","parentNode","ReactDOM","findDOMNode","querySelector","style","display","JSON","parse","dataset","formattedOptions","map","option","value","label","setState","getInitialValue","Shopify","queryParams","location","search","length","aKeyValue","i","aCouples","substr","split","decodeURIComponent","sort_by","$","param","replace","selected","selectedIndex","findIndex","element","viewBox","className","width","height","href","getOptionValue","onChange","handleChange","tabIndex","isSearchable","styles","components","DropdownIndicator","dropDownIndicator","IndicatorSeparator","Component","component","node","render","unmountComponentAtNode","e","console","error"],"mappings":"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","file":"13.chunk.ce209d4aa724c669c968.js","sourcesContent":["import React, { Component } from 'react';\nimport { component } from 'picoapp';\nimport ReactDOM from 'react-dom';\nimport Select from 'react-select';\n\nimport $ from 'jquery';\n\nconst theme = (theme) => ({\n  ...theme,\n  colors: {\n    ...theme.colors,\n    primary25: '#f9f0ef',\n    primary: '#cc99a1',\n    neutral30: \"#cc99a1\"\n  }\n});\n\nconst customStyles = {\n  control: (base, state) => {\n    return {\n      ...base,\n      borderColor: \"#cc99a1\",\n      borderRadius: 0,\n      boxShadow: \"unset\",\n      minHeight: '3.8em'\n    };\n  },\n  indicatorsContainer: (base, state) => {\n    return {\n      ...base,\n      padding: '0.4rem 0.8rem',\n      fontSize: '24px',\n      \n    };\n  },\n  placeholder: (base, state) => {\n    return {\n      ...base,\n      color: \"#514D52\"\n    };\n  },\n  valueContainer: (base, state) => {\n    return {\n      ...base,\n      padding: '0 1.5em',\n      fontSize: '16px',\n      fontWeight: 400\n    };\n  },\n  menu: (base, state) => {\n    return {\n      ...base,\n      borderRadius: 0,\n      marginTop: 0,\n      border: \"1px solid #cc99a1\"\n    };\n  }\n};\n\nclass CollectionSort extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      initialOption: [],\n      options: [],\n      params: {}\n    };\n    this.ctx = props.ctx;\n  }\n\n  componentDidMount() {\n    this.parentNode = ReactDOM.findDOMNode(this).parentNode;\n    const legacySelect = this.parentNode.parentNode.querySelector('select');\n    legacySelect.style.display = 'none';\n    const params = JSON.parse(this.parentNode.dataset.params);\n    \n    // Format the options to be consumed by the select component\n    const options = JSON.parse(this.parentNode.dataset.options);\n  \n    const formattedOptions = options.map((option) => {\n      return { value: option[0], label: option[1]};\n    });\n\n    this.setState(\n      {\n        options: formattedOptions,\n        params: params\n      },\n      () => {\n        this.getInitialValue();\n      }\n    );\n  }\n\n  handleChange(option) {\n    if(option){\n      Shopify.queryParams = {};\n      if (location.search.length) {\n        for (\n          var aKeyValue, i = 0, aCouples = location.search.substr(1).split('&');\n          i < aCouples.length;\n          i++\n        ) {\n          aKeyValue = aCouples[i].split('=');\n          if (aKeyValue.length > 1) {\n            Shopify.queryParams[\n              decodeURIComponent(aKeyValue[0])\n            ] = decodeURIComponent(aKeyValue[1]);\n          }\n        }\n      }\n      Shopify.queryParams.sort_by = option.value;\n      location.search = $.param(Shopify.queryParams).replace(/\\+/g, '%20');\n    }\n  }\n\n  getInitialValue() {\n    if (this.state.params.selected) {\n      let selectedIndex = this.state.options.findIndex(\n        (element) => element.value === this.state.params.selected\n      );\n      this.setState({\n        selected: this.state.options[selectedIndex],\n      });\n    }\n  }\n\n  dropDownIndicator() {\n    return (\n      <svg viewBox='0 0 20 20' className='icon' width='1em' height='1em'>\n        <use href='#icon-down'></use>\n      </svg>\n    )\n  }\n\n  render() {\n    return (\n      <div>\n        <Select\n          getOptionValue={(option) => option}\n          onChange={(option) => this.handleChange(option)}\n          value={this.state.selected}\n          options={this.state.options}\n          placeholder={this.state.params.label}\n          tabIndex=\"0\"\n          isSearchable={false}\n          styles={customStyles}\n          theme={theme}\n          components={{ DropdownIndicator:this.dropDownIndicator, IndicatorSeparator:() => null }}\n        />\n      </div>\n    );\n  }\n}\n\nexport default component((node, ctx) => {\n  const element = <CollectionSort ctx={ctx}/>;\n  ReactDOM.render(element, node);\n\n  // Unmount component on Pjax navigation\n  return function() {\n    try {\n      ReactDOM.unmountComponentAtNode(node);\n    } catch (e) {\n      console.error(e);\n    }\n  };\n});"],"sourceRoot":""}