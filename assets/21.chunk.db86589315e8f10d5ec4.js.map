{"version":3,"sources":["webpack:///./node_modules/chocolat/dist/js/chocolat.esm.js","webpack:///./src/js/components/product/ProductGallery.js"],"names":["timerDebounce","undefined","transitionAsPromise","triggeringFunc","el","Promise","resolve","handleTransitionEnd","removeEventListener","addEventListener","classesBefore","getAttribute","stylesBefore","parseFloat","getComputedStyle","loadImage","src","srcset","sizes","image","Image","reject","decode","then","catch","onload","onerror","fit","options","height","width","imgHeight","imgWidth","containerHeight","containerWidth","canvasWidth","canvasHeight","imageSize","imgRatio","openFullScreen","wrapper","requestFullscreen","webkitRequestFullscreen","msRequestFullscreen","exitFullScreen","document","exitFullscreen","webkitExitFullscreen","msExitFullscreen","defaults","container","body","className","fullScreen","loop","linkImages","setIndex","firstImageIndex","lastImageIndex","currentImageIndex","allowZoom","closeOnBackgroundClick","setTitle","description","this","images","settings","title","pagination","last","zoomedPaddingX","zoomedPaddingY","Chocolat","elements","elems","events","state","fullScreenOpen","initialZoomState","initialized","timer","visible","_cssClasses","NodeList","prototype","isPrototypeOf","HTMLCollection","forEach","i","push","off","on","e","init","preventDefault","Element","HTMLElement","api","open","parseInt","close","next","change","prev","goto","current","position","img","destroy","set","property","value","get","getElem","name","markup","attachListeners","length","afterInitialize","call","load","index","setTimeout","overlay","classList","add","fadeOutPromise","loaderTimer","loader","fadeOutTimer","imageCanvas","remove","loadedImage","clearTimeout","nextIndex","textContent","arrows","appear","toggle","zoomable","afterImageLoad","naturalHeight","naturalWidth","fitOptions","clientHeight","clientWidth","Object","assign","imageWrapper","style","removeChild","setAttribute","appendChild","step","zoomOut","requestedImage","left","right","promiseOverlay","promiseWrapper","all","afterClose","element","eventName","parentNode","createElement","layout","top","center","bottom","fullscreen","afterMarkup","keyCode","querySelector","bind","fullscreenElement","webkitCurrentFullScreenElement","webkitFullscreenElement","contains","stopPropagation","zoomIn","rect","getBoundingClientRect","pos","window","scrollY","scrollX","coord","pageX","pageY","mvtX","paddingX","mvtY","paddingY","marginLeft","marginTop","duration","callback","wrapperWidth","wrapperHeight","isImageZoomable","isImageStretched","margin","cb","split","findIndex","event","splice","instances","instance","Flickity","require","selectors","ProductGallery","ctx","initLightbox","mainSliderEl","thumbsSliderEl","statusCurrent","statusTotal","parentController","getClosest","nextButton","prevButton","thumbsMode","dataset","initSliders","pageDots","prevNextButtons","cellAlign","imagesloaded","wrapAround","lazyload","selectedAttraction","draggable","friction","dragThreshold","arrowShape","mainSlider","thumbsSlider","asNavFor","contain","bindEvents","updateStatus","resize","pointer","select","cellElement","cellIndex","$","removeClass","addClass","previous","detail","variant","featured_image","thumbsItems","querySelectorAll","item","Array","from","indexOf","currentIndex","selectedIndex","totalSlides","cells","innerText","containerEl","slider","slice","component","node"],"mappings":"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","file":"21.chunk.db86589315e8f10d5ec4.js","sourcesContent":["let timerDebounce = undefined;\nfunction debounce(duration, callback) {\n  clearTimeout(timerDebounce);\n  timerDebounce = setTimeout(function () {\n    callback();\n  }, duration);\n  return timerDebounce;\n}\nfunction transitionAsPromise(triggeringFunc, el) {\n  return new Promise(resolve => {\n    const handleTransitionEnd = () => {\n      el.removeEventListener('transitionend', handleTransitionEnd);\n      resolve();\n    };\n\n    el.addEventListener('transitionend', handleTransitionEnd);\n    const classesBefore = el.getAttribute('class');\n    const stylesBefore = el.getAttribute('style');\n    triggeringFunc();\n\n    if (classesBefore === el.getAttribute('class') && stylesBefore === el.getAttribute('style')) {\n      handleTransitionEnd();\n    }\n\n    if (parseFloat(getComputedStyle(el)['transitionDuration']) === 0) {\n      handleTransitionEnd();\n    }\n  });\n}\nfunction loadImage({\n  src,\n  srcset,\n  sizes\n}) {\n  const image = new Image();\n  image.src = src;\n\n  if (srcset) {\n    image.srcset = srcset;\n  }\n\n  if (sizes) {\n    image.sizes = sizes;\n  }\n\n  if ('decode' in image) {\n    return new Promise((resolve, reject) => {\n      image.decode().then(() => {\n        resolve(image);\n      }).catch(() => {\n        reject(image);\n      });\n    });\n  } else {\n    return new Promise((resolve, reject) => {\n      image.onload = resolve(image);\n      image.onerror = reject(image);\n    });\n  }\n}\nfunction fit(options) {\n  let height;\n  let width;\n  const {\n    imgHeight,\n    imgWidth,\n    containerHeight,\n    containerWidth,\n    canvasWidth,\n    canvasHeight,\n    imageSize\n  } = options;\n  const canvasRatio = canvasHeight / canvasWidth;\n  const containerRatio = containerHeight / containerWidth;\n  const imgRatio = imgHeight / imgWidth;\n\n  if (imageSize == 'cover') {\n    if (imgRatio < containerRatio) {\n      height = containerHeight;\n      width = height / imgRatio;\n    } else {\n      width = containerWidth;\n      height = width * imgRatio;\n    }\n  } else if (imageSize == 'native') {\n    height = imgHeight;\n    width = imgWidth;\n  } else {\n    if (imgRatio > canvasRatio) {\n      height = canvasHeight;\n      width = height / imgRatio;\n    } else {\n      width = canvasWidth;\n      height = width * imgRatio;\n    }\n\n    if (imageSize === 'scale-down' && (width >= imgWidth || height >= imgHeight)) {\n      width = imgWidth;\n      height = imgHeight;\n    }\n  }\n\n  return {\n    height: height,\n    width: width\n  };\n}\nfunction openFullScreen(wrapper) {\n  if (wrapper.requestFullscreen) {\n    return wrapper.requestFullscreen();\n  } else if (wrapper.webkitRequestFullscreen) {\n    return wrapper.webkitRequestFullscreen();\n  } else if (wrapper.msRequestFullscreen) {\n    return wrapper.msRequestFullscreen();\n  } else {\n    return Promise.reject();\n  }\n}\nfunction exitFullScreen() {\n  if (document.exitFullscreen) {\n    return document.exitFullscreen();\n  } else if (document.webkitExitFullscreen) {\n    return document.webkitExitFullscreen();\n  } else if (document.msExitFullscreen) {\n    return document.msExitFullscreen();\n  } else {\n    return Promise.reject();\n  }\n}\n\nconst defaults = {\n  container: document.body,\n  // window or element\n  className: undefined,\n  imageSize: 'scale-down',\n  // 'scale-down', 'contain', 'cover' or 'native'\n  fullScreen: false,\n  loop: false,\n  linkImages: true,\n  setIndex: 0,\n  firstImageIndex: 0,\n  lastImageIndex: false,\n  currentImageIndex: undefined,\n  allowZoom: true,\n  closeOnBackgroundClick: true,\n  setTitle: function () {\n    return '';\n  },\n  description: function () {\n    return this.images[this.settings.currentImageIndex].title;\n  },\n  pagination: function () {\n    const last = this.settings.lastImageIndex + 1;\n    const position = this.settings.currentImageIndex + 1;\n    return position + '/' + last;\n  },\n\n  afterInitialize() {},\n\n  afterMarkup() {},\n\n  afterImageLoad() {},\n\n  afterClose() {},\n\n  zoomedPaddingX: function (canvasWidth, imgWidth) {\n    return 0;\n  },\n  zoomedPaddingY: function (canvasHeight, imgHeight) {\n    return 0;\n  }\n};\nclass Chocolat {\n  constructor(elements, settings) {\n    this.settings = settings;\n    this.elems = {};\n    this.images = [];\n    this.events = [];\n    this.state = {\n      fullScreenOpen: false,\n      initialZoomState: null,\n      initialized: false,\n      timer: false,\n      visible: false\n    };\n    this._cssClasses = ['chocolat-open', 'chocolat-in-container', 'chocolat-cover', 'chocolat-zoomable', 'chocolat-zoomed', 'chocolat-zooming-in', 'chocolat-zooming-out'];\n\n    if (NodeList.prototype.isPrototypeOf(elements) || HTMLCollection.prototype.isPrototypeOf(elements)) {\n      elements.forEach((el, i) => {\n        this.images.push({\n          title: el.getAttribute('title'),\n          src: el.getAttribute('href'),\n          srcset: el.getAttribute('data-srcset'),\n          sizes: el.getAttribute('data-sizes')\n        });\n        this.off(el, 'click.chocolat');\n        this.on(el, 'click.chocolat', e => {\n          this.init(i);\n          e.preventDefault();\n        });\n      });\n    } else {\n      this.images = elements;\n    }\n\n    if (this.settings.container instanceof Element || this.settings.container instanceof HTMLElement) {\n      this.elems.container = this.settings.container;\n    } else {\n      this.elems.container = document.body;\n    }\n\n    this.api = {\n      open: i => {\n        i = parseInt(i) || 0;\n        return this.init(i);\n      },\n      close: () => {\n        return this.close();\n      },\n      next: () => {\n        return this.change(1);\n      },\n      prev: () => {\n        return this.change(-1);\n      },\n      goto: i => {\n        return this.open(i);\n      },\n      current: () => {\n        return this.settings.currentImageIndex;\n      },\n      position: () => {\n        return this.position(this.elems.img);\n      },\n      destroy: () => {\n        return this.destroy();\n      },\n      set: (property, value) => {\n        this.settings[property] = value;\n        return value;\n      },\n      get: property => {\n        return this.settings[property];\n      },\n      getElem: name => {\n        return this.elems[name];\n      }\n    };\n  }\n\n  init(i) {\n    if (!this.state.initialized) {\n      this.markup();\n      this.attachListeners();\n      this.settings.lastImageIndex = this.images.length - 1;\n      this.state.initialized = true;\n    }\n\n    this.settings.afterInitialize.call(this);\n    return this.load(i);\n  }\n\n  load(index) {\n    if (!this.state.visible) {\n      this.state.visible = true;\n      setTimeout(() => {\n        this.elems.overlay.classList.add('chocolat-visible');\n        this.elems.wrapper.classList.add('chocolat-visible');\n      }, 0);\n      this.elems.container.classList.add('chocolat-open');\n    }\n\n    if (this.settings.fullScreen) {\n      openFullScreen(this.elems.wrapper);\n    }\n\n    if (this.settings.currentImageIndex === index) {\n      return Promise.resolve();\n    }\n\n    let loaderTimer = setTimeout(() => {\n      this.elems.loader.classList.add('chocolat-visible');\n    }, 1000);\n    let fadeOutPromise;\n    let image;\n    let fadeOutTimer = setTimeout(() => {\n      fadeOutTimer = undefined;\n      fadeOutPromise = transitionAsPromise(() => {\n        this.elems.imageCanvas.classList.remove('chocolat-visible');\n      }, this.elems.imageCanvas);\n    }, 80);\n    return loadImage(this.images[index]).then(loadedImage => {\n      image = loadedImage;\n\n      if (fadeOutTimer) {\n        clearTimeout(fadeOutTimer);\n        return Promise.resolve();\n      } else {\n        return fadeOutPromise;\n      }\n    }).then(() => {\n      const nextIndex = index + 1;\n\n      if (this.images[nextIndex] != undefined) {\n        loadImage(this.images[nextIndex]);\n      }\n\n      this.settings.currentImageIndex = index;\n      this.elems.description.textContent = this.settings.description.call(this);\n      this.elems.pagination.textContent = this.settings.pagination.call(this);\n      this.arrows();\n      return this.position(image).then(() => {\n        this.elems.loader.classList.remove('chocolat-visible');\n        clearTimeout(loaderTimer);\n        return this.appear(image);\n      });\n    }).then(() => {\n      this.elems.container.classList.toggle('chocolat-zoomable', this.zoomable(image, this.elems.wrapper));\n      this.settings.afterImageLoad.call(this);\n    });\n  }\n\n  position({\n    naturalHeight,\n    naturalWidth\n  }) {\n    const fitOptions = {\n      imgHeight: naturalHeight,\n      imgWidth: naturalWidth,\n      containerHeight: this.elems.container.clientHeight,\n      containerWidth: this.elems.container.clientWidth,\n      canvasWidth: this.elems.imageCanvas.clientWidth,\n      canvasHeight: this.elems.imageCanvas.clientHeight,\n      imageSize: this.settings.imageSize\n    };\n    const {\n      width,\n      height\n    } = fit(fitOptions);\n    return transitionAsPromise(() => {\n      Object.assign(this.elems.imageWrapper.style, {\n        width: width + 'px',\n        height: height + 'px'\n      });\n    }, this.elems.imageWrapper);\n  }\n\n  appear(image) {\n    this.elems.imageWrapper.removeChild(this.elems.img);\n    this.elems.img = image;\n    this.elems.img.setAttribute('class', 'chocolat-img');\n    this.elems.imageWrapper.appendChild(this.elems.img);\n    const fadeInPromise = transitionAsPromise(() => {\n      this.elems.imageCanvas.classList.add('chocolat-visible');\n    }, this.elems.imageCanvas);\n    return fadeInPromise;\n  }\n\n  change(step) {\n    if (!this.state.visible) {\n      return;\n    }\n\n    if (!this.settings.linkImages) {\n      return;\n    }\n\n    this.zoomOut();\n    const requestedImage = this.settings.currentImageIndex + parseInt(step);\n\n    if (requestedImage > this.settings.lastImageIndex) {\n      if (this.settings.loop) {\n        return this.load(this.settings.firstImageIndex);\n      }\n    } else if (requestedImage < this.settings.firstImageIndex) {\n      if (this.settings.loop) {\n        return this.load(this.settings.lastImageIndex);\n      }\n    } else {\n      return this.load(requestedImage);\n    }\n  }\n\n  arrows() {\n    if (this.settings.loop) {\n      this.elems.left.classList.add('active');\n      this.elems.right.classList.add('active');\n    } else if (this.settings.linkImages) {\n      this.elems.right.classList.toggle('active', this.settings.currentImageIndex !== this.settings.lastImageIndex);\n      this.elems.left.classList.toggle('active', this.settings.currentImageIndex !== this.settings.firstImageIndex);\n    } else {\n      this.elems.left.classList.remove('active');\n      this.elems.right.classList.remove('active');\n    }\n  }\n\n  close() {\n    if (this.state.fullScreenOpen) {\n      exitFullScreen();\n      return;\n    }\n\n    this.state.visible = false;\n    const promiseOverlay = transitionAsPromise(() => {\n      this.elems.overlay.classList.remove('chocolat-visible');\n    }, this.elems.overlay);\n    const promiseWrapper = transitionAsPromise(() => {\n      this.elems.wrapper.classList.remove('chocolat-visible');\n    }, this.elems.wrapper);\n    return Promise.all([promiseOverlay, promiseWrapper]).then(() => {\n      this.elems.container.classList.remove('chocolat-open');\n      this.settings.afterClose.call(this);\n    });\n  }\n\n  destroy() {\n    for (let i = this.events.length - 1; i >= 0; i--) {\n      const {\n        element,\n        eventName\n      } = this.events[i];\n      this.off(element, eventName);\n    }\n\n    if (!this.state.initialized) {\n      return;\n    }\n\n    if (this.state.fullScreenOpen) {\n      exitFullScreen();\n    }\n\n    this.settings.currentImageIndex = undefined;\n    this.state.visible = false;\n    this.state.initialized = false;\n    this.elems.container.classList.remove(...this._cssClasses);\n    this.elems.wrapper.parentNode.removeChild(this.elems.wrapper);\n  }\n\n  markup() {\n    this.elems.container.classList.add('chocolat-open', this.settings.className);\n\n    if (this.settings.imageSize == 'cover') {\n      this.elems.container.classList.add('chocolat-cover');\n    }\n\n    if (this.elems.container !== document.body) {\n      this.elems.container.classList.add('chocolat-in-container');\n    }\n\n    this.elems.wrapper = document.createElement('div');\n    this.elems.wrapper.setAttribute('id', 'chocolat-content-' + this.settings.setIndex);\n    this.elems.wrapper.setAttribute('class', 'chocolat-wrapper');\n    this.elems.container.appendChild(this.elems.wrapper);\n    this.elems.overlay = document.createElement('div');\n    this.elems.overlay.setAttribute('class', 'chocolat-overlay');\n    this.elems.wrapper.appendChild(this.elems.overlay);\n    this.elems.loader = document.createElement('div');\n    this.elems.loader.setAttribute('class', 'chocolat-loader');\n    this.elems.wrapper.appendChild(this.elems.loader);\n    this.elems.layout = document.createElement('div');\n    this.elems.layout.setAttribute('class', 'chocolat-layout');\n    this.elems.wrapper.appendChild(this.elems.layout);\n    this.elems.top = document.createElement('div');\n    this.elems.top.setAttribute('class', 'chocolat-top');\n    this.elems.layout.appendChild(this.elems.top);\n    this.elems.center = document.createElement('div');\n    this.elems.center.setAttribute('class', 'chocolat-center');\n    this.elems.layout.appendChild(this.elems.center);\n    this.elems.left = document.createElement('div');\n    this.elems.left.setAttribute('class', 'chocolat-left');\n    this.elems.center.appendChild(this.elems.left);\n    this.elems.imageCanvas = document.createElement('div');\n    this.elems.imageCanvas.setAttribute('class', 'chocolat-image-canvas');\n    this.elems.center.appendChild(this.elems.imageCanvas);\n    this.elems.imageWrapper = document.createElement('div');\n    this.elems.imageWrapper.setAttribute('class', 'chocolat-image-wrapper');\n    this.elems.imageCanvas.appendChild(this.elems.imageWrapper);\n    this.elems.img = document.createElement('img');\n    this.elems.img.setAttribute('class', 'chocolat-img');\n    this.elems.imageWrapper.appendChild(this.elems.img);\n    this.elems.right = document.createElement('div');\n    this.elems.right.setAttribute('class', 'chocolat-right');\n    this.elems.center.appendChild(this.elems.right);\n    this.elems.bottom = document.createElement('div');\n    this.elems.bottom.setAttribute('class', 'chocolat-bottom');\n    this.elems.layout.appendChild(this.elems.bottom);\n    this.elems.close = document.createElement('span');\n    this.elems.close.setAttribute('class', 'chocolat-close');\n    this.elems.top.appendChild(this.elems.close);\n    this.elems.description = document.createElement('span');\n    this.elems.description.setAttribute('class', 'chocolat-description');\n    this.elems.bottom.appendChild(this.elems.description);\n    this.elems.pagination = document.createElement('span');\n    this.elems.pagination.setAttribute('class', 'chocolat-pagination');\n    this.elems.bottom.appendChild(this.elems.pagination);\n    this.elems.setTitle = document.createElement('span');\n    this.elems.setTitle.setAttribute('class', 'chocolat-set-title');\n    this.elems.setTitle.textContent = this.settings.setTitle();\n    this.elems.bottom.appendChild(this.elems.setTitle);\n    this.elems.fullscreen = document.createElement('span');\n    this.elems.fullscreen.setAttribute('class', 'chocolat-fullscreen');\n    this.elems.bottom.appendChild(this.elems.fullscreen);\n    this.settings.afterMarkup.call(this);\n  }\n\n  attachListeners() {\n    this.off(document, 'keydown.chocolat');\n    this.on(document, 'keydown.chocolat', e => {\n      if (this.state.initialized) {\n        if (e.keyCode == 37) {\n          this.change(-1);\n        } else if (e.keyCode == 39) {\n          this.change(1);\n        } else if (e.keyCode == 27) {\n          this.close();\n        }\n      }\n    });\n    const right = this.elems.wrapper.querySelector('.chocolat-right');\n    this.off(right, 'click.chocolat');\n    this.on(right, 'click.chocolat', () => {\n      this.change(+1);\n    });\n    const left = this.elems.wrapper.querySelector('.chocolat-left');\n    this.off(left, 'click.chocolat');\n    this.on(left, 'click.chocolat', () => {\n      this.change(-1);\n    });\n    this.off(this.elems.close, 'click.chocolat');\n    this.on(this.elems.close, 'click.chocolat', this.close.bind(this));\n    this.off(this.elems.fullscreen, 'click.chocolat');\n    this.on(this.elems.fullscreen, 'click.chocolat', () => {\n      if (this.state.fullScreenOpen) {\n        exitFullScreen();\n        return;\n      }\n\n      openFullScreen(this.elems.wrapper);\n    });\n    this.off(document, 'fullscreenchange.chocolat');\n    this.on(document, 'fullscreenchange.chocolat', () => {\n      if (document.fullscreenElement || document.webkitCurrentFullScreenElement || document.webkitFullscreenElement) {\n        this.state.fullScreenOpen = true;\n      } else {\n        this.state.fullScreenOpen = false;\n      }\n    });\n    this.off(document, 'webkitfullscreenchange.chocolat');\n    this.on(document, 'webkitfullscreenchange.chocolat', () => {\n      if (document.fullscreenElement || document.webkitCurrentFullScreenElement || document.webkitFullscreenElement) {\n        this.state.fullScreenOpen = true;\n      } else {\n        this.state.fullScreenOpen = false;\n      }\n    });\n\n    if (this.settings.closeOnBackgroundClick) {\n      this.off(this.elems.overlay, 'click.chocolat');\n      this.on(this.elems.overlay, 'click.chocolat', this.close.bind(this));\n    }\n\n    this.off(this.elems.wrapper, 'click.chocolat');\n    this.on(this.elems.wrapper, 'click.chocolat', () => {\n      if (this.state.initialZoomState === null || !this.state.visible) {\n        return;\n      }\n\n      this.elems.container.classList.add('chocolat-zooming-out');\n      this.zoomOut().then(() => {\n        this.elems.container.classList.remove('chocolat-zoomed');\n        this.elems.container.classList.remove('chocolat-zooming-out');\n      });\n    });\n    this.off(this.elems.imageWrapper, 'click.chocolat');\n    this.on(this.elems.imageWrapper, 'click.chocolat', e => {\n      if (this.state.initialZoomState === null && this.elems.container.classList.contains('chocolat-zoomable')) {\n        e.stopPropagation();\n        this.elems.container.classList.add('chocolat-zooming-in');\n        this.zoomIn(e).then(() => {\n          this.elems.container.classList.add('chocolat-zoomed');\n          this.elems.container.classList.remove('chocolat-zooming-in');\n        });\n      }\n    });\n    this.on(this.elems.wrapper, 'mousemove.chocolat', e => {\n      if (this.state.initialZoomState === null || !this.state.visible) {\n        return;\n      }\n\n      const rect = this.elems.wrapper.getBoundingClientRect();\n      const pos = {\n        top: rect.top + window.scrollY,\n        left: rect.left + window.scrollX\n      };\n      const height = this.elems.wrapper.clientHeight;\n      const width = this.elems.wrapper.clientWidth;\n      const imgWidth = this.elems.img.width;\n      const imgHeight = this.elems.img.height;\n      const coord = [e.pageX - width / 2 - pos.left, e.pageY - height / 2 - pos.top];\n      let mvtX = 0;\n\n      if (imgWidth > width) {\n        const paddingX = this.settings.zoomedPaddingX(imgWidth, width);\n        mvtX = coord[0] / (width / 2);\n        mvtX = ((imgWidth - width) / 2 + paddingX) * mvtX;\n      }\n\n      let mvtY = 0;\n\n      if (imgHeight > height) {\n        const paddingY = this.settings.zoomedPaddingY(imgHeight, height);\n        mvtY = coord[1] / (height / 2);\n        mvtY = ((imgHeight - height) / 2 + paddingY) * mvtY;\n      }\n\n      this.elems.img.style.marginLeft = -mvtX + 'px';\n      this.elems.img.style.marginTop = -mvtY + 'px';\n    });\n    this.on(window, 'resize.chocolat', e => {\n      if (!this.state.initialized || !this.state.visible) {\n        return;\n      }\n\n      debounce(50, () => {\n        const fitOptions = {\n          imgHeight: this.elems.img.naturalHeight,\n          imgWidth: this.elems.img.naturalWidth,\n          containerHeight: this.elems.wrapper.clientHeight,\n          containerWidth: this.elems.wrapper.clientWidth,\n          canvasWidth: this.elems.imageCanvas.clientWidth,\n          canvasHeight: this.elems.imageCanvas.clientHeight,\n          imageSize: this.settings.imageSize\n        };\n        const {\n          width,\n          height\n        } = fit(fitOptions);\n        this.position(this.elems.img).then(() => {\n          this.elems.container.classList.toggle('chocolat-zoomable', this.zoomable(this.elems.img, this.elems.wrapper));\n        });\n      });\n    });\n  }\n\n  zoomable(image, wrapper) {\n    const wrapperWidth = wrapper.clientWidth;\n    const wrapperHeight = wrapper.clientHeight;\n    const isImageZoomable = this.settings.allowZoom && (image.naturalWidth > wrapperWidth || image.naturalHeight > wrapperHeight) ? true : false;\n    const isImageStretched = image.clientWidth > image.naturalWidth || image.clientHeight > image.naturalHeight;\n    return isImageZoomable && !isImageStretched;\n  }\n\n  zoomIn(e) {\n    this.state.initialZoomState = this.settings.imageSize;\n    this.settings.imageSize = 'native';\n    return this.position(this.elems.img);\n  }\n\n  zoomOut(e) {\n    this.settings.imageSize = this.state.initialZoomState || this.settings.imageSize;\n    this.state.initialZoomState = null;\n    this.elems.img.style.margin = 0;\n    return this.position(this.elems.img);\n  }\n\n  on(element, eventName, cb) {\n    // const eventName = this.settings.setIndex + '-' + eventName\n    const length = this.events.push({\n      element,\n      eventName,\n      cb\n    });\n    element.addEventListener(eventName.split('.')[0], this.events[length - 1].cb);\n  }\n\n  off(element, eventName) {\n    // const eventName = this.settings.setIndex + '-' + eventName\n    const index = this.events.findIndex(event => {\n      return event.element === element && event.eventName === eventName;\n    });\n\n    if (this.events[index]) {\n      element.removeEventListener(eventName.split('.')[0], this.events[index].cb);\n      this.events.splice(index, 1);\n    }\n  }\n\n}\n\nconst instances = [];\nfunction main_esm (elements, options) {\n  const settings = Object.assign({}, defaults, {\n    images: []\n  }, options, {\n    setIndex: instances.length\n  });\n  const instance = new Chocolat(elements, settings);\n  instances.push(instance);\n  return instance;\n}\n\nexport default main_esm;\n","import { component } from 'picoapp';\nimport { str2json, getClosest } from '../../utilities';\nimport delegate from 'delegate';\nimport Chocolat from 'chocolat';\n// const simpleLightbox = require('simplelightbox');\nconst Flickity = require('flickity');\nimport 'chocolat/dist/css/chocolat.css';\n\nconst selectors = {\n  mainImage: '.mainImage',\n  thumbs: '.Gallery__thumbs .wrapper',\n};\n\nclass ProductGallery {\n  constructor(el, ctx) {\n    this.ctx = ctx;\n    this.init(el);\n    this.initLightbox();\n  }\n\n  init(el) {\n    this.el = el;\n    this.container = this.el;\n    this.mainSliderEl = this.el.querySelector(selectors.mainImage);\n    this.thumbsSliderEl = this.el.querySelector(selectors.thumbs);\n    this.statusCurrent = this.el.querySelector('.Gallery__status .current');\n    this.statusTotal = this.el.querySelector('.Gallery__status .total');\n    this.parentController = getClosest(el, '.Modal');\n    this.nextButton = this.el.querySelector('.next');\n    this.prevButton = this.el.querySelector('.previous');\n\n    this.thumbsMode = this.el.dataset.thumbsMode;\n\n    this.initSliders();\n\n  }\n\n  initSliders() {\n    var defaults = {\n      pageDots: false,\n      prevNextButtons: false,\n      cellAlign: 'center',\n      imagesloaded: true,\n      wrapAround: true,\n      lazyload: true,\n      selectedAttraction: 0.2,\n      draggable: true,\n      friction: 0.8,\n      dragThreshold: 10,\n      arrowShape:\n        'M24.7552323,51.4875645 C23.7482559,50.3911482 23.7482559,48.6150532 24.7552323,47.518637 L65.6194256,2.82355245 C66.1183779,2.27286376 66.7760878,2 67.4337976,2 C68.0915075,2 68.7446814,2.27286376 69.2481696,2.82355245 C70.2506101,3.91996867 70.2506101,5.70102487 69.2481696,6.79744109 L30.2028843,49.5031007 L69.2481696,92.2037992 C70.2506101,93.3002154 70.2506101,95.0812716 69.2481696,96.1776878 C68.2457291,97.2741041 66.6173302,97.2741041 65.6148897,96.1776878 L24.7552323,51.4875645 Z',\n    };\n    const mainSliderOptions = {\n      pageDots: true,\n    };\n    const thumbsSliderOptions = {\n      asNavFor: '.mainImage',\n      contain: true,\n      wrapAround: false,\n    };\n\n    this.mainSlider = new Flickity(this.mainSliderEl, {\n      ...defaults,\n      ...mainSliderOptions,\n    });\n\n    if (this.thumbsMode == 'slider') {\n      this.thumbsSlider = new Flickity(this.thumbsSliderEl, {\n        ...defaults,\n        ...thumbsSliderOptions,\n      });\n    }\n\n\n    this.bindEvents();\n    this.updateStatus();\n\n\n    // Trigger resizes for layout updates\n    this.mainSlider.resize();\n    if (this.thumbsMode == 'slider') {\n      this.thumbsSlider.resize();\n    }\n\n  }\n\n  bindEvents() {\n    if (this.thumbsMode == 'slider') {\n      this.thumbsSlider.on('change', (index, pointer) => {\n        this.mainSlider.select(index);\n      });\n      this.thumbsSlider.on('staticClick', (event, pointer, cellElement, cellIndex) => {\n        this.mainSlider.select(cellIndex);\n        $('.Gallery__thumbs .item.is-selected').removeClass('is-selected');\n        $(cellElement).addClass('is-selected');\n      });\n    }\n\n\n    this.mainSlider.on('change', (index, pointer) => {\n      if (this.thumbsMode == 'slider') {\n        this.thumbsSlider.select(index);\n      }\n      this.updateStatus();\n    });\n\n\n\n\n    if (this.prevButton) {\n      this.prevButton.addEventListener('click', () => {\n        this.mainSlider.previous();\n      });\n    }\n    if (this.nextButton) {\n      this.nextButton.addEventListener('click', () => {\n        this.mainSlider.next();\n      });\n    }\n\n    if (this.parentController) {\n      this.parentController.addEventListener('isActive', () => {\n        this.mainSlider.resize();\n      });\n    }\n\n    this.container.addEventListener('variant-updated', (e) => {\n      if (e.detail.variant.featured_image) {\n        this.mainSlider.select(e.detail.variant.featured_image.position - 1);\n      }\n    });\n\n    if (this.thumbsMode == 'vertical') {\n      const thumbsItems = this.thumbsSliderEl.querySelectorAll('.item');\n      thumbsItems.forEach(item => {\n        item.addEventListener('click', () => {\n          const index = Array.from(thumbsItems).indexOf(item);\n          this.mainSlider.select(index);\n        })\n      })\n    }\n  }\n\n  updateStatus() {\n    let currentIndex = this.mainSlider.selectedIndex + 1;\n    let totalSlides = this.mainSlider.cells.length;\n\n    if (this.statusCurrent) {\n      this.statusCurrent.innerText = currentIndex;\n    }\n    if (this.statusTotal) {\n      this.statusTotal.innerText = totalSlides;\n    }\n  }\n\n  initCustomSliderUI(containerEl, slider) {\n    // const cellsButtonGroup = containerEl;\n    const cellsButtons = [].slice.call(containerEl.querySelectorAll('.item'));\n    // console.log(cellsButtons);\n    // return;\n    // update buttons on select\n    // slider.on('cellSelect', (index) => {\n    //   var previousSelectedButton = cellsButtonGroup.querySelector(\n    //     '.is-selected'\n    //   );\n    //   var selectedButton = cellsButtonGroup.children[slider.selectedIndex];\n    //   previousSelectedButton.classList.remove('is-selected');\n    //   selectedButton.classList.add('is-selected');\n    // });\n    // cell select\n    cellsButtons.forEach((el, index) => {\n      el.addEventListener('click', (e) => {\n        slider.select(index);\n      });\n    });\n  }\n\n  initLightbox() {\n    Chocolat(document.querySelectorAll('.mainImage .product-single__media'));\n    Chocolat(document.querySelectorAll('.Gallery__thumbs--mobile img'));\n  }\n}\n\n// export default ProductGallery;\nexport default component((node, ctx) => {\n  new ProductGallery(node, ctx);\n});"],"sourceRoot":""}